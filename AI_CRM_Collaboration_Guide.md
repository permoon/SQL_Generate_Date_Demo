# AI 協作指南：從零打造企業級 CRM 分析倉儲

本指南旨在協助非技術背景的專案經理或分析師，透過與 AI 對話，從無到有建立一套包含 Schema 設計、測試資料與初步分析的 CRM 資料倉儲。

---

## 🚀 專案協作四部曲

| 階段 | 英文代號 | 核心目標 | 產出物 |
| :--- | :--- | :--- | :--- |
| **1. 定義架構** | **Define** | 確立資料庫長什麼樣子 | Schema 設計圖、DDL 語法 |
| **2. 生成資料** | **Generate** | 產生逼真的模擬數據 | Python 產生器、.db 資料庫檔 |
| **3. 驗證細化** | **Refine** | 修正邏輯與商業細節 | 修正後的資料庫、補充文件 |
| **4. 探索洞察** | **EDA** | 初步檢視資料品質與分佈 | HTML 分析報告 |

---

## 📒 階段一：定義架構 (Define Schema)

### 🎯 目的
讓 AI 知道你的業務場景，並產出符合分析需求的資料表結構。

### 💬 建議 Prompt (請直接複製修改)

> **[角色設定]**
> 你是一位資深的資料倉儲架構師，專精於零售業的 CRM 分析。
>
> **[任務目標]**
> 請幫我規劃一個適用於 SQLite 的 CRM 分析資料倉儲 Schema。我需要以下五張核心表格：
> 1.  **交易明細 (Transactions)**：要能計算客單價、購買頻率。
> 2.  **會員主檔 (Members)**：包含基本輪廓與會員等級。
> 3.  **產品維度 (Products)**：需包含多階層分類與成本資訊。
> 4.  **通路維度 (Channels)**：區分線上與線下門市。
> 5.  **行銷成效 (Campaigns)**：紀錄活動發送與成效。
>
> **[輸出要求]**
> 1.  請提供完整的 SQL DDL (Create Table) 語法。
> 2.  請產出一份 Markdown 文件，條列每個欄位的定義，以及這些欄位可以用來做什麼分析 (例如：RFM、購物籃分析)。

### 💡 關鍵注意事項
*   **指定資料庫**：務必說明是 `SQLite`, `MySQL` 還是 `BigQuery`，因為語法會有微小差異。
*   **強調用途**：加上「為了計算客單價」或「為了做商品關聯分析」，AI 會自動補上必要的欄位（如 `transaction_id` 或 `category`）。

---

## 💾 階段二：生成資料 (Generate Mock Data)

### 🎯 目的
產生「不均勻」且「有意義」的測試資料，這比傳統亂數更有價值，能模擬真實世界的商業現象。

### 💬 建議 Prompt (請直接複製修改)

> **[任務目標]**
> 請依照剛剛設計的 schema，寫一支 Python script 幫我生成測試資料，並直接存入 `crm_data.db` (SQLite)。
>
> **[資料量與分配要求]** (非常重要！)
> 1.  **會員數**：至少 10,000 人。
> 2.  **交易頻率**：請使用 **Gamma 分配** 或 **帕累托法則 (80/20)** 模擬，讓少數會員擁有大量訂單，多數會員只有少量訂單。
> 3.  **產品偏好**：設定 20% 的熱銷商品佔據 80% 的銷量。
> 4.  **季節性**：交易日期請集中在 Q4 (雙11、聖誕節)，不要平均分佈在每個月。
> 5.  **異常值**：請隨機加入 1% 的特大單 (Whales) 或退貨資料 (負金額)，讓資料更真實。
>
> **[技術要求]**
> *   使用 Python 的 `sqlite3` 與 `random` library 即可，盡量不要依賴非標準函式庫。
> *   腳本執行完畢後請印出「成功生成 XX 筆資料」的訊息。

### 💡 關鍵注意事項
*   **拒絕均勻分配 (Uniform Distribution)**：真實世界沒有「均勻」的。如果你不指定，AI 通常會用 `random.choice` 平均分配，導致分析結果像一條死魚。**Gamma 分配** 或 **80/20 法則** 是讓數據「活起來」的咒語。
*   **設定極端值**：要求加入「特大單」或「久未購買的會員」，這能讓你後續的分析報告更有故事可說。

---

## 🔧 階段三：驗證與細化 (Refine & Iterate)

### 🎯 目的
發現資料邏輯與業務需求不符時，進行精準的修正。這是與 AI 合作最常發生的環節。

### 💬 建議 Prompt (請直接複製修改)

> **[發現問題]**
> 我檢查了剛剛的 `campaign_performance` 表，發現它是「活動層級」的彙總表 (Summary Table)。
>
> **[修正需求]**
> 我需要更細的顆粒度。請將行銷資料拆分成兩張表：
> 1.  **活動主檔 (Campaigns)**：紀錄活動名稱、走期、預算。
> 2.  **發送紀錄 (Campaign Logs)**：**每一位會員**針對**每一個活動**都要有一筆紀錄，紀錄他是否收到、是否開信、是否點擊。
>
> **[執行動作]**
> 1.  請給出修改後的 SQL DDL。
> 2.  請更新 Python 資料生成腳本，重新生成 `crm_data.db`。

### 💡 關鍵注意事項
*   **明確指出「現況」與「期望」的落差**：不要只說「這個不對」，要說「這目前是 Summary，但我需要 Transaction level」。
*   **連動更新**：資料結構改了，資料生成程式通常也要大改。記得要求 AI **同時更新文件與程式碼**。

---

## 📊 階段四：探索性分析 (EDA)

### 🎯 目的
在不寫 SQL 的情況下，快速確認資料品質，並獲得第一份分析報告。

### 💬 建議 Prompt (請直接複製修改)

> **[任務目標]**
> 請幫我對 `crm_data.db` 進行探索性資料分析 (EDA)。
>
> **[輸出形式]**
> 請寫一支 Python script，產出一個單一的 HTML 檔案 (`crm_eda_report.html`)。
>
> **[分析內容]**
> 1.  **基本統計**：每張表的筆數、欄位遺失值 (Missing Value)、唯一值數量。
> 2.  **分佈視覺化**：
>     *   對於數值欄位 (如 `sales_amount`, `age`)，請畫出 Histogram (直方圖) 觀察分佈。
>     *   對於類別欄位 (如 `city`, `channel_type`)，請畫出 Bar Chart (長條圖) 顯示前 10 大類別。
> 3.  **圖表技術**：請嵌入 `Chart.js` 或使用 `base64` 圖片，確保 HTML 打開就能看，不需要聯網載入複雜套件。

### 💡 關鍵注意事項
*   **指定 HTML**：這是給非技術主管看報告最友善的格式。
*   **檢查分佈**：拿到報告後，第一件事是檢查圖表。如果所有長條圖都一樣高（均勻分佈），代表你在階段二的 Prompt 下得不夠精準，需要回去重做資料生成。

---

## 🏆 給管理者的心法

1.  **Prompt 是溝通，不是程式碼**：用你跟人類工程師說話的方式跟 AI 說話，但邏輯要更嚴謹。
2.  **Iterative Process (迭代)**：不要追求一次完美。先求有 schema，再求有資料，最後求精準度。
3.  **把 AI 當成「動手不動腦」的實習生**：你必須負責「動腦」定義商業邏輯（如：什麼叫活躍會員？），讓 AI 負責「動手」寫 Code 實作。

